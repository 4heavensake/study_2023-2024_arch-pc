---
## Front matter
title: "Отчёт по лабораторной работе №9"
subtitle: "Понятие подпрограммы. Отладчик GDB."
author: "Югай Александр Витальевич"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Познакомиться с методами отладки при помощи GDB, его возможностями.



# Выполнение лабораторной работы

## Реализация подпрограмм в NASM

Создаем каталог для программ ЛБ9, и в нем создаем файл 
<p align="center">![Создаем каталог с помощью команды mkdir и файл с помощью команды touch](image/Снимок экрана от 2023-12-08 00-03-46.png)
<p>Открываем файл в Midnight Commander и заполняем его в соответствии с листингом 9.1
<p align="center">![Заполняем файл](image/Снимок экрана от 2023-12-08 00-04-57.png)
<p>Создаем исполняемый файл и запускаем его
<p align="center">![Запускаем файл и проверяем его работу](image/Снимок экрана от 2023-12-08 00-06-17.png)
<p>Снова открываем файл для редактирования и изменяем его, добавив подпрограмму в 
подпрограмму(по условию)
<p align="center">![Изменяем файл, добавляя еще одну подпрограмму](image/Снимок экрана от 2023-12-08 00-16-29.png)
<p>Создаем исполняемый файл и запускаем его 
<p align="center">![Запускаем файл и смотрим на его работу](image/Снимок экрана от 2023-12-08 00-17-31.png)

## Отладка программам с помощью GDB

Создаем новый файл в каталоге
<p align="center">![Создаем файл](image/Снимок экрана от 2023-12-08 00-18-35.png)
<p>Открываем файл в Midnight Commander и заполняем его в соответствии с листингом 9.2
<p align="center">![Заполняем файл](image/Снимок экрана от 2023-12-08 00-19-31.png)
<p>Получаем исходный файл с использованием отладчика gdb
<p align="center">![Загружаем исходный файл в отладчик](image/Снимок экрана от 2023-12-08 00-21-08.png)
<p>Запускаем команду в отладчике
<p align="center">![Запускаем программу командой run](image/Снимок экрана от 2023-12-08 00-21-37.png)
<p>Устанавливаем брейкпоинт на метку _start и запускаем программу
<p align="center">![Запускаем программу с брейкпоином](image/Снимок экрана от 2023-12-08 00-22-25.png)
<p>Смотрим дисассимилированный код программы с помощью команды disassemble, начиная с метки 
_start
<p align="center">![Смотрим дисассимилированный код программы](image/Снимок экрана от 2023-12-08 00-23-46.png)
<p>Переключаемся на отображение команд с Intel’овским синтаксисом
<p align="center">![Переключаемся на синтаксис Intel](image/Снимок экрана от 2023-12-08 00-24-33.png)
<p>Различия отображения синтаксиса машинных команд в режимах ATT и Intel:
<p>1.Порядок операндов: В ATT синтаксисе порядок операндов обратный, сначала указывается 
исходный операнд, а затем - результирующий операнд. В Intel синтаксисе порядок обычно прямой, 
результирующий операнд указывается первым, а исходный - вторым.
<p>2.Разделители: В ATT синтаксисе разделители операндов - запятые. В Intel синтаксисе 
разделители могут быть запятые или косые черты (/).
<p>3.Префиксы размера операндов: В ATT синтаксисе размер операнда указывается перед операндом 
с использованием префиксов, таких как 'b' (byte), 'w' (word), 'l' (long) и 'q' (quadword). В Intel 
синтаксисе размер операнда указывается после операнда с использованием суффиксов, таких как 
'b', 'w', 'd' и 'q'.
<p>4.Знак операндов: В ATT синтаксисе операнды с позитивными значениями предваряются 
символом '$'. В Intel синтаксисе операнды с позитивными значениями могут быть указаны без 
символа '$'.
<p>5.Обозначение адресов: В ATT синтаксисе адреса указываются в круглых скобках. В Intel 
синтаксисе адреса указываются без скобок.
<p>6.Обозначение регистров: В ATT синтаксисе обозначение регистра начинается с символа '%'. В 
Intel синтаксисе обозначение регистра может начинаться с символа 'R' или 'E' (например, 
'%eax' или 'RAX').
<p>Включаем режим псевдографики
<p align="center">![Включаем отображение регистров, их значений и результат дисассимилирования программы](image/Снимок экрана от 2023-12-08 00-26-25.png)
<p>Проверяем была ли установлена точка останова и устанавливаем точку останова предпоследней 
инструкции
<p align="center">![Используем команду info breakpoints и создаем новую точку останова](image/Снимок экрана от 2023-12-08 00-37-14.png)
<p>Посмотрим информацию о всех установленных точках останова
<p align="center">![Смотрим информацию](image/Снимок экрана от 2023-12-08 00-37-47.png)
<p>Выполняем 5 инструкций командой si 
<p align="center">![Отслеживаем регистры](image/Снимок экрана от 2023-12-08 00-38-37.png)
<p>Во время выполнения команд менялись регистры: ebx, ecx, edx,eax, eip.
Смотрим значение переменной msg1 по имени
<p align="center">![Смотрим значение переменной](image/Снимок экрана от 2023-12-08 00-40-40.png)
<p>Смотрим значение переменной msg2 по адресу
<p align="center">![Смотрим значение переменной](image/Снимок экрана от 2023-12-08 00-41-21.png)
<p>Изменим первый символ переменной msg1
<p align="center">![Меняем символ](image/Снимок экрана от 2023-12-08 00-43-37.png)
<p>Изменим первый символ переменной msg2
<p align="center">![Меняем символ](image/Снимок экрана от 2023-12-08 00-46-34.png)
<p>Смотрим значение регистра edx в разных форматах
<p align="center">![Смотрим значение регистра](image/Снимок экрана от 2023-12-08 00-49-21.png)
<p>Изменяем регистор ebx
<p align="center">![Изменяем регистор командой set](image/Снимок экрана от 2023-12-08 00-51-20.png)
<p>Выводится разные значения, так как команда без кеавычек присваивает регистру вводимое 
значение.
<p>Прописываем команды для завершения программы и выхода из GDB
<p align="center">![Прописываем команды c и quit](image/Снимок экрана от 2023-12-08 00-52-56.png)
<p>Копируем файл lab8-2.asm в файл с именем lab09-3.asm
<p align="center">![Копируем файл](image/Снимок экрана от 2023-12-08 00-53-51.png)
<p>Создаем исполняемый файл и запускаем его в отладчике GDB 
<p align="center">![Создаем и запускаем в отладчике файл](image/Снимок экрана от 2023-12-08 00-55-47.png)
<p>Установим точку останова перед первой инструкцией в программе и запустим ее
<p align="center">![Устанавливаем точку останова](image/Снимок экрана от 2023-12-08 00-57-20.png)
<p>Смотрим позиции стека по разным адресам
<p align="center">![Изучаем полученные данные](image/Снимок экрана от 2023-12-08 01-00-03.png)
<p>Шаг изменения адреса равен 4 потому что адресные регистры имеют размерность 32 бита(4 
байта).

## Задание для самостоятельной работы

### Задание 1

Копируем файл lab8-4.asm(ср №1 в ЛБ8) в файл с именем lab09-4.asm
<p align="center">![Копируем файл](image/Снимок экрана от 2023-12-09 15-16-28.png)
<p>Открываем файл в Midnight Commander и меняем его, создавая подпрограмму
<p align="center">![Изменяем файл](image/Снимок экрана от 2023-12-08 01-21-56.png)
<p>Создаем исполняемый файл и запускаем его
<p align="center">![Проверяем работу программы](image/Снимок экрана от 2023-12-08 01-22-37.png)

### Задание 2 

Создаем новый файл в дирректории 
<p align="center">![Создаем файл](image/Снимок экрана от 2023-12-09 15-19-25.png)
<p>Открываем файл в Midnight Commander и заполняем его в соответствии с листингом 9.3
<p align="center">![Изменяем файл](image/Снимок экрана от 2023-12-08 01-24-35.png)
<p>Создаем исполняемый файл и запускаем его
<p align="center">![Создаем и смотрим на работу программы](image/Снимок экрана от 2023-12-09 15-26-53.png)
<p>Создаем исполняемый файл и запускаем его в отладчике GDB и смотрим на изменение решистров 
командой si
<p align="center">![Ищем ошибку регистров в отладчике](image/Снимок экрана от 2023-12-08 01-29-55.png)
<p>Изменяем программу для корректной работы 
<p align="center">![Меняем файл](image/Снимок экрана от 2023-12-08 01-32-17.png)
<p>Создаем исполняемый файл и запускаем его
<p align="center">![Создаем и запускаем файл](image/Снимок экрана от 2023-12-08 01-33-09.png)

# Выводы

Мы познакомились с методами отладки при помощи GDB и его возможностями.


